"use strict";(self["webpackChunkprject"]=self["webpackChunkprject"]||[]).push([[525],{9525:function(e,a,l){l.r(a),l.d(a,{default:function(){return c}});var o=l(6768);const t={class:"room-list"},r={class:"card-header"};function n(e,a,l,n,d,u){const i=(0,o.g2)("el-button"),m=(0,o.g2)("el-table-column"),p=(0,o.g2)("el-table"),s=(0,o.g2)("el-pagination"),b=(0,o.g2)("el-card"),c=(0,o.g2)("el-input"),g=(0,o.g2)("el-form-item"),f=(0,o.g2)("el-input-number"),k=(0,o.g2)("el-form"),h=(0,o.g2)("el-dialog"),C=(0,o.gN)("loading");return(0,o.uX)(),(0,o.CE)("div",t,[(0,o.bF)(b,null,{header:(0,o.k6)(()=>[(0,o.Lk)("div",r,[a[12]||(a[12]=(0,o.Lk)("span",null,"房间管理",-1)),(0,o.bF)(i,{type:"primary",onClick:n.handleAdd},{default:(0,o.k6)(()=>[...a[11]||(a[11]=[(0,o.eW)("新增房间",-1)])]),_:1},8,["onClick"])])]),default:(0,o.k6)(()=>[(0,o.bo)(((0,o.uX)(),(0,o.Wv)(p,{data:n.tableData,border:""},{default:(0,o.k6)(()=>[(0,o.bF)(m,{prop:"id",label:"ID",width:"80"}),(0,o.bF)(m,{prop:"roomCode",label:"房间编号"}),(0,o.bF)(m,{prop:"roomName",label:"房间名称"}),(0,o.bF)(m,{prop:"roomType",label:"房间类型"}),(0,o.bF)(m,{prop:"maxSize",label:"最大容纳数"}),(0,o.bF)(m,{prop:"usedSize",label:"当前占用数"}),(0,o.bF)(m,{prop:"roomStatus",label:"房间状态"}),(0,o.bF)(m,{prop:"remark",label:"备注"}),(0,o.bF)(m,{label:"操作",width:"200",fixed:"right"},{default:(0,o.k6)(({row:e})=>[(0,o.bF)(i,{type:"primary",size:"small",onClick:a=>n.handleEdit(e)},{default:(0,o.k6)(()=>[...a[13]||(a[13]=[(0,o.eW)("编辑",-1)])]),_:1},8,["onClick"]),(0,o.bF)(i,{type:"danger",size:"small",onClick:a=>n.handleDelete(e)},{default:(0,o.k6)(()=>[...a[14]||(a[14]=[(0,o.eW)("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[C,n.loading]]),(0,o.bF)(s,{"current-page":n.pagination.current,"onUpdate:currentPage":a[0]||(a[0]=e=>n.pagination.current=e),"page-size":n.pagination.size,"onUpdate:pageSize":a[1]||(a[1]=e=>n.pagination.size=e),total:n.pagination.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),_:1}),(0,o.bF)(h,{modelValue:n.dialogVisible,"onUpdate:modelValue":a[10]||(a[10]=e=>n.dialogVisible=e),title:n.dialogTitle,width:"600px",onClose:n.handleDialogClose},{footer:(0,o.k6)(()=>[(0,o.bF)(i,{onClick:a[9]||(a[9]=e=>n.dialogVisible=!1)},{default:(0,o.k6)(()=>[...a[15]||(a[15]=[(0,o.eW)("取消",-1)])]),_:1}),(0,o.bF)(i,{type:"primary",onClick:n.handleSubmit},{default:(0,o.k6)(()=>[...a[16]||(a[16]=[(0,o.eW)("确定",-1)])]),_:1},8,["onClick"])]),default:(0,o.k6)(()=>[(0,o.bF)(k,{model:n.formData,rules:n.rules,ref:"formRef","label-width":"100px"},{default:(0,o.k6)(()=>[(0,o.bF)(g,{label:"房间编号",prop:"roomCode"},{default:(0,o.k6)(()=>[(0,o.bF)(c,{modelValue:n.formData.roomCode,"onUpdate:modelValue":a[2]||(a[2]=e=>n.formData.roomCode=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(g,{label:"房间名称",prop:"roomName"},{default:(0,o.k6)(()=>[(0,o.bF)(c,{modelValue:n.formData.roomName,"onUpdate:modelValue":a[3]||(a[3]=e=>n.formData.roomName=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(g,{label:"房间类型",prop:"roomType"},{default:(0,o.k6)(()=>[(0,o.bF)(f,{modelValue:n.formData.roomType,"onUpdate:modelValue":a[4]||(a[4]=e=>n.formData.roomType=e),min:0},null,8,["modelValue"])]),_:1}),(0,o.bF)(g,{label:"最大容纳数",prop:"maxSize"},{default:(0,o.k6)(()=>[(0,o.bF)(f,{modelValue:n.formData.maxSize,"onUpdate:modelValue":a[5]||(a[5]=e=>n.formData.maxSize=e),min:0},null,8,["modelValue"])]),_:1}),(0,o.bF)(g,{label:"当前占用数",prop:"usedSize"},{default:(0,o.k6)(()=>[(0,o.bF)(f,{modelValue:n.formData.usedSize,"onUpdate:modelValue":a[6]||(a[6]=e=>n.formData.usedSize=e),min:0},null,8,["modelValue"])]),_:1}),(0,o.bF)(g,{label:"房间状态",prop:"roomStatus"},{default:(0,o.k6)(()=>[(0,o.bF)(f,{modelValue:n.formData.roomStatus,"onUpdate:modelValue":a[7]||(a[7]=e=>n.formData.roomStatus=e),min:0},null,8,["modelValue"])]),_:1}),(0,o.bF)(g,{label:"备注",prop:"remark"},{default:(0,o.k6)(()=>[(0,o.bF)(c,{modelValue:n.formData.remark,"onUpdate:modelValue":a[8]||(a[8]=e=>n.formData.remark=e),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title","onClose"])])}var d=l(144),u=l(1219),i=l(2933),m=l(466),p={name:"RoomList",setup(){const e=(0,d.KR)(!1),a=(0,d.KR)(!1),l=(0,d.KR)(null),t=(0,d.KR)([]),r=(0,d.Kh)({id:null,roomCode:"",roomName:"",roomType:null,maxSize:null,usedSize:null,roomStatus:null,remark:""}),n=(0,d.Kh)({current:1,size:10,total:0}),p={roomCode:[{required:!0,message:"请输入房间编号",trigger:"blur"}],roomName:[{required:!0,message:"请输入房间名称",trigger:"blur"}]},s=(0,d.KR)("新增房间"),b=async()=>{e.value=!0;try{const e=await m.QG.getPage({current:n.current,size:n.size});200!==e.code&&e.code||(t.value=e.data?.records||[],n.total=e.data?.total||0)}catch(a){u.nk.error("加载数据失败")}finally{e.value=!1}},c=()=>{s.value="新增房间",Object.assign(r,{id:null,roomCode:"",roomName:"",roomType:null,maxSize:null,usedSize:null,roomStatus:null,remark:""}),a.value=!0},g=async e=>{s.value="编辑房间";try{const l=await m.QG.getById(e.id);200!==l.code&&l.code||(Object.assign(r,l.data||e),a.value=!0)}catch(l){u.nk.error("获取房间信息失败")}},f=e=>{i.s.confirm("确定要删除该房间吗？","提示",{type:"warning"}).then(async()=>{try{await m.QG.removeById(e.id),u.nk.success("删除成功"),b()}catch(a){u.nk.error("删除失败")}}).catch(()=>{})},k=async()=>{l.value&&await l.value.validate(async e=>{if(e)try{await m.QG.saveOrUpdate(r),u.nk.success("操作成功"),a.value=!1,b()}catch(l){u.nk.error("操作失败")}})},h=()=>{l.value?.resetFields()},C=()=>{b()},F=()=>{b()};return(0,o.sV)(()=>{b()}),{loading:e,dialogVisible:a,dialogTitle:s,formRef:l,tableData:t,formData:r,pagination:n,rules:p,handleAdd:c,handleEdit:g,handleDelete:f,handleSubmit:k,handleDialogClose:h,handleSizeChange:C,handleCurrentChange:F}}},s=l(1241);const b=(0,s.A)(p,[["render",n],["__scopeId","data-v-d620c586"]]);var c=b}}]);
//# sourceMappingURL=525.f22fd5fc.js.map