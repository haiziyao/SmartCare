"use strict";(self["webpackChunkprject"]=self["webpackChunkprject"]||[]).push([[873],{8873:function(e,a,l){l.r(a),l.d(a,{default:function(){return g}});var t=l(6768),o=l(4232);const r={class:"caregiver-list"},d={class:"card-header"};function n(e,a,l,n,i,u){const p=(0,t.g2)("el-button"),b=(0,t.g2)("el-table-column"),s=(0,t.g2)("el-table"),m=(0,t.g2)("el-pagination"),f=(0,t.g2)("el-card"),g=(0,t.g2)("el-input"),c=(0,t.g2)("el-form-item"),h=(0,t.g2)("el-option"),k=(0,t.g2)("el-select"),F=(0,t.g2)("el-col"),v=(0,t.g2)("el-date-picker"),_=(0,t.g2)("el-row"),V=(0,t.g2)("el-form"),y=(0,t.g2)("el-dialog"),D=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(f,null,{header:(0,t.k6)(()=>[(0,t.Lk)("div",d,[a[15]||(a[15]=(0,t.Lk)("span",null,"监护人管理",-1)),(0,t.bF)(p,{type:"primary",onClick:n.handleAdd},{default:(0,t.k6)(()=>[...a[14]||(a[14]=[(0,t.eW)("新增监护人",-1)])]),_:1},8,["onClick"])])]),default:(0,t.k6)(()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(s,{data:n.tableData,border:""},{default:(0,t.k6)(()=>[(0,t.bF)(b,{prop:"id",label:"ID",width:"80"}),(0,t.bF)(b,{prop:"caregiverName",label:"姓名"}),(0,t.bF)(b,{prop:"gender",label:"性别"},{default:(0,t.k6)(({row:e})=>[(0,t.eW)((0,o.v_)(1===e.gender?"男":2===e.gender?"女":"未知"),1)]),_:1}),(0,t.bF)(b,{prop:"phone",label:"联系电话"}),(0,t.bF)(b,{prop:"email",label:"邮箱"}),(0,t.bF)(b,{prop:"relationship",label:"关系类型"},{default:(0,t.k6)(({row:e})=>[(0,t.eW)((0,o.v_)(n.getRelationshipText(e.relationship)),1)]),_:1}),(0,t.bF)(b,{prop:"notifyLevel",label:"通知等级"},{default:(0,t.k6)(({row:e})=>[(0,t.eW)((0,o.v_)(n.getNotifyLevelText(e.notifyLevel)),1)]),_:1}),(0,t.bF)(b,{label:"操作",width:"200",fixed:"right"},{default:(0,t.k6)(({row:e})=>[(0,t.bF)(p,{type:"primary",size:"small",onClick:a=>n.handleEdit(e)},{default:(0,t.k6)(()=>[...a[16]||(a[16]=[(0,t.eW)("编辑",-1)])]),_:1},8,["onClick"]),(0,t.bF)(p,{type:"danger",size:"small",onClick:a=>n.handleDelete(e)},{default:(0,t.k6)(()=>[...a[17]||(a[17]=[(0,t.eW)("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[D,n.loading]]),(0,t.bF)(m,{"current-page":n.pagination.current,"onUpdate:currentPage":a[0]||(a[0]=e=>n.pagination.current=e),"page-size":n.pagination.size,"onUpdate:pageSize":a[1]||(a[1]=e=>n.pagination.size=e),total:n.pagination.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),_:1}),(0,t.bF)(y,{modelValue:n.dialogVisible,"onUpdate:modelValue":a[13]||(a[13]=e=>n.dialogVisible=e),title:n.dialogTitle,width:"700px",onClose:n.handleDialogClose},{footer:(0,t.k6)(()=>[(0,t.bF)(p,{onClick:a[12]||(a[12]=e=>n.dialogVisible=!1)},{default:(0,t.k6)(()=>[...a[18]||(a[18]=[(0,t.eW)("取消",-1)])]),_:1}),(0,t.bF)(p,{type:"primary",onClick:n.handleSubmit},{default:(0,t.k6)(()=>[...a[19]||(a[19]=[(0,t.eW)("确定",-1)])]),_:1},8,["onClick"])]),default:(0,t.k6)(()=>[(0,t.bF)(V,{model:n.formData,rules:n.rules,ref:"formRef","label-width":"120px"},{default:(0,t.k6)(()=>[(0,t.bF)(c,{label:"监护人姓名",prop:"caregiverName"},{default:(0,t.k6)(()=>[(0,t.bF)(g,{modelValue:n.formData.caregiverName,"onUpdate:modelValue":a[2]||(a[2]=e=>n.formData.caregiverName=e)},null,8,["modelValue"])]),_:1}),(0,t.bF)(_,{gutter:20},{default:(0,t.k6)(()=>[(0,t.bF)(F,{span:12},{default:(0,t.k6)(()=>[(0,t.bF)(c,{label:"性别",prop:"gender"},{default:(0,t.k6)(()=>[(0,t.bF)(k,{modelValue:n.formData.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>n.formData.gender=e),placeholder:"请选择"},{default:(0,t.k6)(()=>[(0,t.bF)(h,{label:"男",value:1}),(0,t.bF)(h,{label:"女",value:2}),(0,t.bF)(h,{label:"未知",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(F,{span:12},{default:(0,t.k6)(()=>[(0,t.bF)(c,{label:"出生日期",prop:"birthDate"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:n.formData.birthDate,"onUpdate:modelValue":a[4]||(a[4]=e=>n.formData.birthDate=e),type:"datetime",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DDTHH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,t.bF)(c,{label:"身份证号",prop:"idCard"},{default:(0,t.k6)(()=>[(0,t.bF)(g,{modelValue:n.formData.idCard,"onUpdate:modelValue":a[5]||(a[5]=e=>n.formData.idCard=e)},null,8,["modelValue"])]),_:1}),(0,t.bF)(_,{gutter:20},{default:(0,t.k6)(()=>[(0,t.bF)(F,{span:12},{default:(0,t.k6)(()=>[(0,t.bF)(c,{label:"联系电话",prop:"phone"},{default:(0,t.k6)(()=>[(0,t.bF)(g,{modelValue:n.formData.phone,"onUpdate:modelValue":a[6]||(a[6]=e=>n.formData.phone=e)},null,8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(F,{span:12},{default:(0,t.k6)(()=>[(0,t.bF)(c,{label:"邮箱",prop:"email"},{default:(0,t.k6)(()=>[(0,t.bF)(g,{modelValue:n.formData.email,"onUpdate:modelValue":a[7]||(a[7]=e=>n.formData.email=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,t.bF)(_,{gutter:20},{default:(0,t.k6)(()=>[(0,t.bF)(F,{span:12},{default:(0,t.k6)(()=>[(0,t.bF)(c,{label:"关系",prop:"relationship"},{default:(0,t.k6)(()=>[(0,t.bF)(k,{modelValue:n.formData.relationship,"onUpdate:modelValue":a[8]||(a[8]=e=>n.formData.relationship=e),placeholder:"请选择"},{default:(0,t.k6)(()=>[(0,t.bF)(h,{label:"父母",value:1}),(0,t.bF)(h,{label:"子女",value:2}),(0,t.bF)(h,{label:"配偶",value:3}),(0,t.bF)(h,{label:"亲属",value:4}),(0,t.bF)(h,{label:"其他",value:5})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(F,{span:12},{default:(0,t.k6)(()=>[(0,t.bF)(c,{label:"通知等级",prop:"notifyLevel"},{default:(0,t.k6)(()=>[(0,t.bF)(k,{modelValue:n.formData.notifyLevel,"onUpdate:modelValue":a[9]||(a[9]=e=>n.formData.notifyLevel=e),placeholder:"请选择"},{default:(0,t.k6)(()=>[(0,t.bF)(h,{label:"全部通知",value:1}),(0,t.bF)(h,{label:"仅中高风险",value:2}),(0,t.bF)(h,{label:"仅高风险",value:3})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,t.bF)(c,{label:"家庭住址",prop:"homeAddress"},{default:(0,t.k6)(()=>[(0,t.bF)(g,{modelValue:n.formData.homeAddress,"onUpdate:modelValue":a[10]||(a[10]=e=>n.formData.homeAddress=e)},null,8,["modelValue"])]),_:1}),(0,t.bF)(c,{label:"备注",prop:"remark"},{default:(0,t.k6)(()=>[(0,t.bF)(g,{modelValue:n.formData.remark,"onUpdate:modelValue":a[11]||(a[11]=e=>n.formData.remark=e),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title","onClose"])])}l(8111),l(7588);var i=l(144),u=l(1219),p=l(2933),b=l(466),s={name:"CaregiverList",setup(){const e=(0,i.KR)(!1),a=(0,i.KR)(!1),l=(0,i.KR)(null),o=(0,i.KR)([]),r=(0,i.Kh)({id:null,userId:null,caregiverName:"",gender:null,birthDate:"",idCard:"",relationship:null,phone:"",email:"",homeAddress:"",notifyLevel:1,remark:""}),d=(0,i.Kh)({current:1,size:10,total:0}),n={caregiverName:[{required:!0,message:"请输入监护人姓名",trigger:"blur"}]},s=(0,i.KR)("新增监护人"),m=e=>{const a={1:"父母",2:"子女",3:"配偶",4:"亲属",5:"其他"};return a[e]||"未知"},f=e=>{const a={1:"全部通知",2:"仅中高风险",3:"仅高风险"};return a[e]||"未知"},g=async()=>{e.value=!0;try{const e=await b.p9.getPage({current:d.current,size:d.size});200!==e.code&&e.code||(o.value=e.data?.records||[],d.total=e.data?.total||0)}catch(a){u.nk.error("加载数据失败")}finally{e.value=!1}},c=()=>{s.value="新增监护人",Object.keys(r).forEach(e=>{"string"===typeof r[e]?r[e]="":r[e]=null}),r.id=null,r.notifyLevel=1,a.value=!0},h=async e=>{s.value="编辑监护人";try{const l=await b.p9.getById(e.id);200!==l.code&&l.code||(Object.assign(r,l.data||e),a.value=!0)}catch(l){u.nk.error("获取监护人信息失败")}},k=e=>{p.s.confirm("确定要删除该监护人吗？","提示",{type:"warning"}).then(async()=>{try{await b.p9.removeById(e.id),u.nk.success("删除成功"),g()}catch(a){u.nk.error("删除失败")}}).catch(()=>{})},F=async()=>{l.value&&await l.value.validate(async e=>{if(e)try{await b.p9.saveOrUpdate(r),u.nk.success("操作成功"),a.value=!1,g()}catch(l){u.nk.error("操作失败")}})},v=()=>{l.value?.resetFields()},_=()=>{g()},V=()=>{g()};return(0,t.sV)(()=>{g()}),{loading:e,dialogVisible:a,dialogTitle:s,formRef:l,tableData:o,formData:r,pagination:d,rules:n,getRelationshipText:m,getNotifyLevelText:f,handleAdd:c,handleEdit:h,handleDelete:k,handleSubmit:F,handleDialogClose:v,handleSizeChange:_,handleCurrentChange:V}}},m=l(1241);const f=(0,m.A)(s,[["render",n],["__scopeId","data-v-67147514"]]);var g=f}}]);
//# sourceMappingURL=873.6ea75692.js.map